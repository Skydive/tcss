<div id="global-loader">
	<div>
		<h1 class="loader-title spinner-above">precess.io</h1>
		<div class="spinner s40 m50"></div>
	</div>
</div>

<header>
	<div class="header">
		<div class="content">
			<div class="spinner s25">
			</div>
			<a href="javascript:SKY.History.pushState({}, '/');" class="button title r">TCSS</a>
			<div style="flex-grow:1;"></div>
			<a style="text-align:center;font-family:'EB Garamond',serif;padding:0 10px;" href="javascript:SKY.History.pushState({}, '/events');" class="logout button r">NEWS</a>
			<a style="text-align:center;font-family:'EB Garamond',serif;padding:0 10px;" href="javascript:SKY.History.pushState({}, '/events');" class="logout button r">EVENTS</a>
			<a style="text-align:center;font-family:'EB Garamond',serif;padding:0 10px;" href="javascript:SKY.History.pushState({}, '/sponsors');" class="logout button r">SPONSORS</a>
			<a style="text-align:center;font-family:'EB Garamond',serif;padding:0 10px;" href="javascript:SKY.History.pushState({}, '/sponsors');" class="logout button r">COMMITTEE</a>
			<a href="javascript:Lib.Ajax.Raven.Redirect({redirect_url: 'https://'+window.location.hostname+'/atlas'}).done(function(json) {window.location.href=json.auth_url;});" class="login button o">login</a>
			<div class="indicator logout" style="padding: 0 25px 0 15px;display:flex;flex-direction:row;background-color:#efefef;align-items:center;justify-content:center;height:64px;cursor:pointer;">
				<svg class="avatar" style="margin-right:12px;width:42px;height:42px;background-color:white;border-radius:50%;" data-jdenticon-value="ka476"></svg>
				<div class="content" style="display:flex;flex-direction:column;">
					<div class="upper" style="width:100%;font-size:14px;">K. Aleem (ka476)</div>
					<div class="lower" style="width:100%;font-size:12px;">Developer</div>
				</div>
			</div>
		</div>
	</div>
</header>

<script>
$(function() {
	$(".header .indicator.logout").on('click', function() {
		SKY.History.pushState({}, '/dashboard');
	});
})
$(SKY.History).on('construct', function(e, data) {
	$(window).trigger('token_validate');
});
$(window).on('user_session_created', function(e, data) {
	$(".login").hide();
	$(".logout").show();
});
$(window).on('user_session_destroyed', function(e, data) {
	$(".login").show();
	$(".logout").hide();
});

$(window).on('user_atlas_success', function(e, data) {
	$(".logout.indicator .upper").text(data.display_name+" ("+data.crsid+")");
	$(".logout.indicator .avatar").attr('data-jdenticon-value', data.crsid);
});
$(window).on('user_group_success', function(e, data) {
	$(".logout.indicator .lower").text(data.display_name);
});
$(window).on('user_session_destroyed', function(e, data) {
	$(".atlas.small").hide();
});

</script>
